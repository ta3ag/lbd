diff -Naur Chapter12_2/AsmParser/Cpu0AsmParser.cpp Chapter12_3/AsmParser/Cpu0AsmParser.cpp
--- Chapter12_2/AsmParser/Cpu0AsmParser.cpp	2014-02-05 17:53:49.239923661 +0800
+++ Chapter12_3/AsmParser/Cpu0AsmParser.cpp	2014-02-05 17:51:41.000000000 +0800
@@ -1075,35 +1075,37 @@
   { 111 /* lui */, Cpu0::LUi, Convert__Reg1_0__Imm1_1, 0, { MCK_CPURegs, MCK_Imm }, },
   { 115 /* mfhi */, Cpu0::MFHI, Convert__Reg1_0, 0, { MCK_CPURegs }, },
   { 120 /* mflo */, Cpu0::MFLO, Convert__Reg1_0, 0, { MCK_CPURegs }, },
-  { 125 /* mthi */, Cpu0::MTHI, Convert__Reg1_0, 0, { MCK_CPURegs }, },
-  { 130 /* mtlo */, Cpu0::MTLO, Convert__Reg1_0, 0, { MCK_CPURegs }, },
-  { 135 /* mul */, Cpu0::MUL, Convert__Reg1_0__Reg1_1__Reg1_2, 0, { MCK_CPURegs, MCK_CPURegs, MCK_CPURegs }, },
-  { 139 /* mult */, Cpu0::MULT, Convert__Reg1_0__Reg1_1, 0, { MCK_CPURegs, MCK_CPURegs }, },
-  { 144 /* multu */, Cpu0::MULTu, Convert__Reg1_0__Reg1_1, 0, { MCK_CPURegs, MCK_CPURegs }, },
-  { 150 /* nop */, Cpu0::NOP, Convert_NoOperands, 0, {  }, },
-  { 154 /* or */, Cpu0::OR, Convert__Reg1_0__Reg1_1__Reg1_2, 0, { MCK_CPURegs, MCK_CPURegs, MCK_CPURegs }, },
-  { 157 /* ori */, Cpu0::ORi, Convert__Reg1_0__Reg1_1__Imm1_2, 0, { MCK_CPURegs, MCK_CPURegs, MCK_Imm }, },
-  { 161 /* ret */, Cpu0::JR, Convert__Reg1_0, 0, { MCK_CPURegs }, },
-  { 165 /* rol */, Cpu0::ROL, Convert__Reg1_0__Reg1_1__Imm1_2, 0, { MCK_CPURegs, MCK_CPURegs, MCK_Imm }, },
-  { 169 /* ror */, Cpu0::ROR, Convert__Reg1_0__Reg1_1__Imm1_2, 0, { MCK_CPURegs, MCK_CPURegs, MCK_Imm }, },
-  { 173 /* sb */, Cpu0::SB, Convert__Reg1_0__Mem2_1, 0, { MCK_CPURegs, MCK_Mem }, },
-  { 176 /* sh */, Cpu0::SH, Convert__Reg1_0__Mem2_1, 0, { MCK_CPURegs, MCK_Mem }, },
-  { 179 /* shl */, Cpu0::SHL, Convert__Reg1_0__Reg1_1__Imm1_2, 0, { MCK_CPURegs, MCK_CPURegs, MCK_Imm }, },
-  { 183 /* shlv */, Cpu0::SHLV, Convert__Reg1_0__Reg1_1__Reg1_2, 0, { MCK_CPURegs, MCK_CPURegs, MCK_CPURegs }, },
-  { 188 /* shr */, Cpu0::SHR, Convert__Reg1_0__Reg1_1__Imm1_2, 0, { MCK_CPURegs, MCK_CPURegs, MCK_Imm }, },
-  { 192 /* shrv */, Cpu0::SHRV, Convert__Reg1_0__Reg1_1__Reg1_2, 0, { MCK_CPURegs, MCK_CPURegs, MCK_CPURegs }, },
-  { 197 /* slt */, Cpu0::SLT, Convert__Reg1_0__Reg1_1__Reg1_2, Feature_HasCpu032II, { MCK_GPROut, MCK_CPURegs, MCK_CPURegs }, },
-  { 201 /* slti */, Cpu0::SLTi, Convert__Reg1_0__Reg1_1__Imm1_2, Feature_HasCpu032II, { MCK_GPROut, MCK_CPURegs, MCK_Imm }, },
-  { 206 /* sltiu */, Cpu0::SLTiu, Convert__Reg1_0__Reg1_1__Imm1_2, Feature_HasCpu032II, { MCK_GPROut, MCK_CPURegs, MCK_Imm }, },
-  { 212 /* sltu */, Cpu0::SLTu, Convert__Reg1_0__Reg1_1__Reg1_2, Feature_HasCpu032II, { MCK_GPROut, MCK_CPURegs, MCK_CPURegs }, },
-  { 217 /* sra */, Cpu0::SRA, Convert__Reg1_0__Reg1_1__Imm1_2, 0, { MCK_CPURegs, MCK_CPURegs, MCK_Imm }, },
-  { 221 /* srav */, Cpu0::SRAV, Convert__Reg1_0__Reg1_1__Reg1_2, 0, { MCK_CPURegs, MCK_CPURegs, MCK_CPURegs }, },
-  { 226 /* st */, Cpu0::ST, Convert__Reg1_0__Mem2_1, 0, { MCK_CPURegs, MCK_Mem }, },
-  { 229 /* sub */, Cpu0::SUB, Convert__Reg1_0__Reg1_1__Reg1_2, 0, { MCK_CPURegs, MCK_CPURegs, MCK_CPURegs }, },
-  { 233 /* subu */, Cpu0::SUBu, Convert__Reg1_0__Reg1_1__Reg1_2, 0, { MCK_CPURegs, MCK_CPURegs, MCK_CPURegs }, },
-  { 238 /* swi */, Cpu0::SWI, Convert__Imm1_0, 0, { MCK_Imm }, },
-  { 242 /* xor */, Cpu0::XOR, Convert__Reg1_0__Reg1_1__Reg1_2, 0, { MCK_CPURegs, MCK_CPURegs, MCK_CPURegs }, },
-  { 246 /* xori */, Cpu0::XORi, Convert__Reg1_0__Reg1_1__Imm1_2, 0, { MCK_CPURegs, MCK_CPURegs, MCK_Imm }, },
+  { 125 /* movn */, Cpu0::MOVN_I_I, Convert__Reg1_0__Reg1_1__Reg1_2__Tie0, 0, { MCK_CPURegs, MCK_CPURegs, MCK_CPURegs }, },
+  { 130 /* movz */, Cpu0::MOVZ_I_I, Convert__Reg1_0__Reg1_1__Reg1_2__Tie0, 0, { MCK_CPURegs, MCK_CPURegs, MCK_CPURegs }, },
+  { 135 /* mthi */, Cpu0::MTHI, Convert__Reg1_0, 0, { MCK_CPURegs }, },
+  { 140 /* mtlo */, Cpu0::MTLO, Convert__Reg1_0, 0, { MCK_CPURegs }, },
+  { 145 /* mul */, Cpu0::MUL, Convert__Reg1_0__Reg1_1__Reg1_2, 0, { MCK_CPURegs, MCK_CPURegs, MCK_CPURegs }, },
+  { 149 /* mult */, Cpu0::MULT, Convert__Reg1_0__Reg1_1, 0, { MCK_CPURegs, MCK_CPURegs }, },
+  { 154 /* multu */, Cpu0::MULTu, Convert__Reg1_0__Reg1_1, 0, { MCK_CPURegs, MCK_CPURegs }, },
+  { 160 /* nop */, Cpu0::NOP, Convert_NoOperands, 0, {  }, },
+  { 164 /* or */, Cpu0::OR, Convert__Reg1_0__Reg1_1__Reg1_2, 0, { MCK_CPURegs, MCK_CPURegs, MCK_CPURegs }, },
+  { 167 /* ori */, Cpu0::ORi, Convert__Reg1_0__Reg1_1__Imm1_2, 0, { MCK_CPURegs, MCK_CPURegs, MCK_Imm }, },
+  { 171 /* ret */, Cpu0::JR, Convert__Reg1_0, 0, { MCK_CPURegs }, },
+  { 175 /* rol */, Cpu0::ROL, Convert__Reg1_0__Reg1_1__Imm1_2, 0, { MCK_CPURegs, MCK_CPURegs, MCK_Imm }, },
+  { 179 /* ror */, Cpu0::ROR, Convert__Reg1_0__Reg1_1__Imm1_2, 0, { MCK_CPURegs, MCK_CPURegs, MCK_Imm }, },
+  { 183 /* sb */, Cpu0::SB, Convert__Reg1_0__Mem2_1, 0, { MCK_CPURegs, MCK_Mem }, },
+  { 186 /* sh */, Cpu0::SH, Convert__Reg1_0__Mem2_1, 0, { MCK_CPURegs, MCK_Mem }, },
+  { 189 /* shl */, Cpu0::SHL, Convert__Reg1_0__Reg1_1__Imm1_2, 0, { MCK_CPURegs, MCK_CPURegs, MCK_Imm }, },
+  { 193 /* shlv */, Cpu0::SHLV, Convert__Reg1_0__Reg1_1__Reg1_2, 0, { MCK_CPURegs, MCK_CPURegs, MCK_CPURegs }, },
+  { 198 /* shr */, Cpu0::SHR, Convert__Reg1_0__Reg1_1__Imm1_2, 0, { MCK_CPURegs, MCK_CPURegs, MCK_Imm }, },
+  { 202 /* shrv */, Cpu0::SHRV, Convert__Reg1_0__Reg1_1__Reg1_2, 0, { MCK_CPURegs, MCK_CPURegs, MCK_CPURegs }, },
+  { 207 /* slt */, Cpu0::SLT, Convert__Reg1_0__Reg1_1__Reg1_2, Feature_HasCpu032II, { MCK_GPROut, MCK_CPURegs, MCK_CPURegs }, },
+  { 211 /* slti */, Cpu0::SLTi, Convert__Reg1_0__Reg1_1__Imm1_2, Feature_HasCpu032II, { MCK_GPROut, MCK_CPURegs, MCK_Imm }, },
+  { 216 /* sltiu */, Cpu0::SLTiu, Convert__Reg1_0__Reg1_1__Imm1_2, Feature_HasCpu032II, { MCK_GPROut, MCK_CPURegs, MCK_Imm }, },
+  { 222 /* sltu */, Cpu0::SLTu, Convert__Reg1_0__Reg1_1__Reg1_2, Feature_HasCpu032II, { MCK_GPROut, MCK_CPURegs, MCK_CPURegs }, },
+  { 227 /* sra */, Cpu0::SRA, Convert__Reg1_0__Reg1_1__Imm1_2, 0, { MCK_CPURegs, MCK_CPURegs, MCK_Imm }, },
+  { 231 /* srav */, Cpu0::SRAV, Convert__Reg1_0__Reg1_1__Reg1_2, 0, { MCK_CPURegs, MCK_CPURegs, MCK_CPURegs }, },
+  { 236 /* st */, Cpu0::ST, Convert__Reg1_0__Mem2_1, 0, { MCK_CPURegs, MCK_Mem }, },
+  { 239 /* sub */, Cpu0::SUB, Convert__Reg1_0__Reg1_1__Reg1_2, 0, { MCK_CPURegs, MCK_CPURegs, MCK_CPURegs }, },
+  { 243 /* subu */, Cpu0::SUBu, Convert__Reg1_0__Reg1_1__Reg1_2, 0, { MCK_CPURegs, MCK_CPURegs, MCK_CPURegs }, },
+  { 248 /* swi */, Cpu0::SWI, Convert__Imm1_0, 0, { MCK_Imm }, },
+  { 252 /* xor */, Cpu0::XOR, Convert__Reg1_0__Reg1_1__Reg1_2, 0, { MCK_CPURegs, MCK_CPURegs, MCK_CPURegs }, },
+  { 256 /* xori */, Cpu0::XORi, Convert__Reg1_0__Reg1_1__Imm1_2, 0, { MCK_CPURegs, MCK_CPURegs, MCK_Imm }, },
 };
 
 unsigned Cpu0AsmParser::
diff -Naur Chapter12_2/Cpu0CondMov.td Chapter12_3/Cpu0CondMov.td
--- Chapter12_2/Cpu0CondMov.td	1970-01-01 08:00:00.000000000 +0800
+++ Chapter12_3/Cpu0CondMov.td	2014-02-05 17:53:49.239923661 +0800
@@ -0,0 +1,77 @@
+//===-- Cpu0CondMov.td - Describe Cpu0 Conditional Moves --*- tablegen -*--===//
+//
+//                     The LLVM Compiler Infrastructure
+//
+// This file is distributed under the University of Illinois Open Source
+// License. See LICENSE.TXT for details.
+//
+//===----------------------------------------------------------------------===//
+//
+// This is the Conditional Moves implementation.
+//
+//===----------------------------------------------------------------------===//
+
+// Conditional moves:
+// These instructions are expanded in
+// Cpu0ISelLowering::EmitInstrWithCustomInserter if target does not have
+// conditional move instructions.
+// cond:int, data:int
+class CondMovIntInt<RegisterClass CRC, RegisterClass DRC, bits<8> op,
+                    string instr_asm> :
+  FA<op, (outs DRC:$ra), (ins DRC:$rb, CRC:$rc, DRC:$F),
+     !strconcat(instr_asm, "\t$ra, $rb, $rc"), [], IIAlu> {
+  let shamt = 0;
+  let Constraints = "$F = $ra";
+}
+
+// select patterns
+multiclass MovzPats0Slt<RegisterClass CRC, RegisterClass DRC,
+                     Instruction MOVZInst, Instruction SLTOp,
+                     Instruction SLTuOp, Instruction SLTiOp,
+                     Instruction SLTiuOp> {
+  def : Pat<(select (i32 (setge CRC:$lhs, CRC:$rhs)), DRC:$T, DRC:$F),
+            (MOVZInst DRC:$T, (SLTOp CRC:$lhs, CRC:$rhs), DRC:$F)>;
+  def : Pat<(select (i32 (setuge CRC:$lhs, CRC:$rhs)), DRC:$T, DRC:$F),
+            (MOVZInst DRC:$T, (SLTuOp CRC:$lhs, CRC:$rhs), DRC:$F)>;
+  def : Pat<(select (i32 (setge CRC:$lhs, immSExt16:$rhs)), DRC:$T, DRC:$F),
+            (MOVZInst DRC:$T, (SLTiOp CRC:$lhs, immSExt16:$rhs), DRC:$F)>;
+  def : Pat<(select (i32 (setuge CRC:$lh, immSExt16:$rh)), DRC:$T, DRC:$F),
+            (MOVZInst DRC:$T, (SLTiuOp CRC:$lh, immSExt16:$rh), DRC:$F)>;
+  def : Pat<(select (i32 (setle CRC:$lhs, CRC:$rhs)), DRC:$T, DRC:$F),
+            (MOVZInst DRC:$T, (SLTOp CRC:$rhs, CRC:$lhs), DRC:$F)>;
+  def : Pat<(select (i32 (setule CRC:$lhs, CRC:$rhs)), DRC:$T, DRC:$F),
+            (MOVZInst DRC:$T, (SLTuOp CRC:$rhs, CRC:$lhs), DRC:$F)>;
+}
+
+multiclass MovzPats1<RegisterClass CRC, RegisterClass DRC,
+                     Instruction MOVZInst, Instruction XOROp> {
+  def : Pat<(select (i32 (seteq CRC:$lhs, CRC:$rhs)), DRC:$T, DRC:$F),
+            (MOVZInst DRC:$T, (XOROp CRC:$lhs, CRC:$rhs), DRC:$F)>;
+  def : Pat<(select (i32 (seteq CRC:$lhs, 0)), DRC:$T, DRC:$F),
+            (MOVZInst DRC:$T, CRC:$lhs, DRC:$F)>;
+}
+
+multiclass MovnPats<RegisterClass CRC, RegisterClass DRC, Instruction MOVNInst,
+                    Instruction XOROp> {
+  def : Pat<(select (i32 (setne CRC:$lhs, CRC:$rhs)), DRC:$T, DRC:$F),
+            (MOVNInst DRC:$T, (XOROp CRC:$lhs, CRC:$rhs), DRC:$F)>;
+  def : Pat<(select CRC:$cond, DRC:$T, DRC:$F),
+            (MOVNInst DRC:$T, CRC:$cond, DRC:$F)>;
+  def : Pat<(select (i32 (setne CRC:$lhs, 0)),DRC:$T, DRC:$F),
+            (MOVNInst DRC:$T, CRC:$lhs, DRC:$F)>;
+}
+
+// Instantiation of instructions.
+def MOVZ_I_I     : CondMovIntInt<CPURegs, CPURegs, 0x0a, "movz">;
+
+def MOVN_I_I     : CondMovIntInt<CPURegs, CPURegs, 0x0b, "movn">;
+
+// Instantiation of conditional move patterns.
+let Predicates = [HasCpu032II] in {
+defm : MovzPats0Slt<CPURegs, CPURegs, MOVZ_I_I, SLT, SLTu, SLTi, SLTiu>;
+}
+
+defm : MovzPats1<CPURegs, CPURegs, MOVZ_I_I, XOR>;
+
+defm : MovnPats<CPURegs, CPURegs, MOVN_I_I, XOR>;
+
diff -Naur Chapter12_2/Cpu0InstrInfo.td Chapter12_3/Cpu0InstrInfo.td
--- Chapter12_2/Cpu0InstrInfo.td	2014-02-05 17:53:49.187923661 +0800
+++ Chapter12_3/Cpu0InstrInfo.td	2014-02-05 17:53:49.239923661 +0800
@@ -847,3 +847,6 @@
 defm : SetgePatsSlt<CPURegs, SLT, SLTu>;
 defm : SetgeImmPatsSlt<CPURegs, SLTi, SLTiu>;
 }
+
+include "Cpu0CondMov.td"
+
diff -Naur Chapter12_2/Cpu0ISelLowering.cpp Chapter12_3/Cpu0ISelLowering.cpp
--- Chapter12_2/Cpu0ISelLowering.cpp	2014-02-05 17:53:49.187923661 +0800
+++ Chapter12_3/Cpu0ISelLowering.cpp	2014-02-05 17:53:49.239923661 +0800
@@ -140,6 +140,7 @@
 
   // Cpu0 Custom Operations
   setOperationAction(ISD::GlobalAddress,      MVT::i32,   Custom);
+  setOperationAction(ISD::SELECT,             MVT::i32,   Custom);
   setOperationAction(ISD::BRCOND,             MVT::Other, Custom);
   setOperationAction(ISD::VASTART,            MVT::Other, Custom);
 
@@ -153,6 +154,7 @@
 
   // Operations not directly supported by Cpu0.
   setOperationAction(ISD::BR_CC,             MVT::i32, Expand);
+  setOperationAction(ISD::SELECT_CC,         MVT::Other, Expand);
   setOperationAction(ISD::DYNAMIC_STACKALLOC, MVT::i32,  Expand);
 
   // Support va_arg(): variable numbers (not fixed numbers) of arguments 
@@ -234,6 +236,7 @@
   {
     case ISD::BRCOND:             return LowerBRCOND(Op, DAG);
     case ISD::GlobalAddress:      return LowerGlobalAddress(Op, DAG);
+    case ISD::SELECT:             return lowerSELECT(Op, DAG);
     case ISD::VASTART:            return LowerVASTART(Op, DAG);
   }
   return SDValue();
@@ -263,6 +266,12 @@
 {
   return Op;
 }
+
+SDValue Cpu0TargetLowering::
+lowerSELECT(SDValue Op, SelectionDAG &DAG) const
+{
+  return Op;
+}
 
 SDValue Cpu0TargetLowering::LowerGlobalAddress(SDValue Op,
                                                SelectionDAG &DAG) const {
diff -Naur Chapter12_2/Cpu0ISelLowering.h Chapter12_3/Cpu0ISelLowering.h
--- Chapter12_2/Cpu0ISelLowering.h	2014-02-05 17:53:49.187923661 +0800
+++ Chapter12_3/Cpu0ISelLowering.h	2014-02-05 17:53:49.239923661 +0800
@@ -95,6 +95,7 @@
 
     // Lower Operand specifics
     SDValue LowerBRCOND(SDValue Op, SelectionDAG &DAG) const;
+    SDValue lowerSELECT(SDValue Op, SelectionDAG &DAG) const;
     SDValue LowerGlobalAddress(SDValue Op, SelectionDAG &DAG) const;
     SDValue LowerVASTART(SDValue Op, SelectionDAG &DAG) const;
 
